install()
document()
install()
library(Virusparies)
library(Virusparies)
?VhgBoxplot
path <- system.file("extdata", "virushunter.tsv", package = "Virusparies")
vh_file <- importVirusTable(path)
View(vh_file)
View(vh_file)
# import gatherer files
path2 <- system.file("extdata", "virusgatherer.tsv", package = "Virusparies")
vg_file <- importVirusTable(path2)
View(vg_file)
names(vh_file)
names(vg_file)
library(devtools)
document()
check()
below_threshold <- aggregate(SRA_run ~ best_query, data = subset(vh_file, vh_file$ViralRefSeq_E < 10^(-cutoff)), sum)
cutoff=0.00001
cutoff=0.00001
below_threshold <- aggregate(SRA_run ~ best_query, data = subset(vh_file, vh_file$ViralRefSeq_E < 10^(-cutoff)), sum)
View(as.numeric(vh_file$SRA_run))
head(as.numeric(vh_file$SRA_run))
head(vh_file$SRA_run)
below_threshold <- aggregate(SRA_run ~ best_query, data = subset(vh_file, vh_file$ViralRefSeq_E < 10^(-cutoff)), FUN = function(x) {
table(x)
})
View(below_threshold)
below_threshold <- aggregate(SRA_run ~ best_query, data = subset(vh_file, ViralRefSeq_E < 10^(-cutoff)), FUN = length)
below_threshold
?vhRunsBarplot
167+2+6+5
below_threshold <- aggregate(SRA_run ~ best_query, data = subset(vh_file, ViralRefSeq_E < 10^(-cutoff)), FUN = function(x) {
sum(ViralRefSeq_E < 10^(-cutoff))
})
below_threshold <- aggregate(SRA_run ~ best_query, data = vh_file[ViralRefSeq_E < 10^(-cutoff), ], FUN = function(x) {
sum(ViralRefSeq_E < 10^(-cutoff))
})
below_threshold <- aggregate(SRA_run ~ best_query, data = vh_file[ViralRefSeq_E < 10^(-cutoff), ], FUN = function(x) {
sum(vh_file$ViralRefSeq_E < 10^(-cutoff))
})
below_threshold <- aggregate(SRA_run ~ best_query, data = vh_file[vh_file$ViralRefSeq_E < 10^(-cutoff), ], FUN = function(x) {
sum(vh_file$ViralRefSeq_E < 10^(-cutoff))
})
below_threshold
below_threshold <- aggregate(SRA_run ~ best_query, data = vh_file[ViralRefSeq_E < 10^(-cutoff), ], FUN = length)
below_threshold
below_threshold <- aggregate(SRA_run ~ best_query, data = vh_file, FUN = function(x) {
sum(vh_file$ViralRefSeq_E[x < 10^(-cutoff)])
})
below_threshold
below_threshold <- aggregate(SRA_run ~ best_query, data = vh_file, FUN = function(x) {
sum(vh_file$ViralRefSeq_E < 10^(-cutoff))
})
below_threshold
below_threshold <- aggregate(SRA_run ~ best_query, data = vh_file, FUN = function(x) {
sum(vh_file$ViralRefSeq_E[x < 10^(-cutoff)] < 10^(-cutoff))
})
below_threshold
below_threshold <- vh_file %>%
group_by(best_query) %>%
summarize(SRA_run = sum(ViralRefSeq_E < 10^(-cutoff)))
below_threshold
vh_file[vh_file$ViralRefSeq_E<1e-5,]
length(vh_file[vh_file$ViralRefSeq_E<1e-5,])
nrow(vh_file[vh_file$ViralRefSeq_E<1e-5,])
10^(-5)
below_threshold <- vh_file %>%
group_by(best_query) %>%
summarize(SRA_run = sum(ViralRefSeq_E < 10^(-cutoff)))
below_threshold
# Find the smallest value greater than 0 in ViralRefSeq_E
min_positive_value <- min(vh_file$ViralRefSeq_E[vh_file$ViralRefSeq_E > 0])
# Replace all 0 values with the smallest positive value
vh_file$ViralRefSeq_E[vh_file$ViralRefSeq_E == 0] <- min_positive_value
below_threshold <- vh_file %>%
group_by(best_query) %>%
summarize(SRA_run = sum(ViralRefSeq_E < 10^(-cutoff)))
below_threshold
below_threshold <- vh_file %>%
filter(ViralRefSeq_E < 10^(-cutoff)) %>%
group_by(best_query) %>%
summarize(SRA_run = n())
below_threshold
below_threshold <- table(vh_file$best_query[vh_file$ViralRefSeq_E < 10^(-cutoff)])
below_threshold
below_threshold <- vh_file %>%
group_by(best_query) %>%
summarize(SRA_run = sum(ViralRefSeq_E < 10^(-5)))
below_threshold
154+1+6+5
aggregate(num_hits ~ best_query, data = subset(vh_file, vh_file$ViralRefSeq_E < 10^(-cutoff)), sum)
aggregate(SRA_run ~ best_query, data = vh_file, sum)
vh_file %>%
group_by(best_query) %>%
summarize(SRA_run = n())
library(devtools)
document()
check()
document()
check()
install()
library(Virusparies)
?VhgBoxplot
path <- system.file("extdata", "virushunter.tsv", package = "Virusparies")
vh_file <- importVirusTable(path)
plot1 <- VhgBoxplot(vh_file, x_column = "best_query", y_column = "ViralRefSeq_E")
plot1$summary_stats
vh_file %>%
group_by(.data$best_query) %>%
summarize(SRA_run = sum(.data$ViralRefSeq_E < 10^(-5)))
below_threshold <- vh_file %>%
group_by(.data$best_query) %>%
summarize(SRA_run = sum(.data$ViralRefSeq_E < 10^(-5)))
below_threshold
library(dplyr)
below_threshold <- vh_file %>%
group_by(.data$best_query) %>%
summarize(SRA_run = sum(.data$ViralRefSeq_E < 10^(-5)))
below_threshold
# Calculate the total hits for each best_query group
total_hits <- vh_file %>%
group_by(.data$best_query) %>%
summarize(SRA_run = n())
# Calculate the total hits for each best_query group
total_hits
below_threshold <- vh_file %>%
group_by(.data$best_query) %>%
summarize(SRA_run = sum(.data$ViralRefSeq_E < 10^(-5)))
below_threshold
median(1.28e-12,1.28e-04)
# Calculate the percentage of hits below the threshold
below_threshold <- merge(below_threshold, total_hits, by = "best_query")
below_threshold$percentage_below_thr <- with(below_threshold, (SRA_run.x / SRA_run.y) * 100)
# Rename and keep only the relevant SRA_run column
below_threshold$SRA_run_belowThreshold <- below_threshold$SRA_run.x  # Keeping SRA_run.x and renaming it to SRA_run
below_threshold
median(12,7)
median(12,4)
median(4,12)
library(devtools)
document()
document()
check()
document()
check()
document()
check()
install()
library(Virusparies)
?VhgBoxplot
library(devtools)
document()
check()
document()
check()
document()
document()
document()
check()
install()
library(devtools)
library(Virusparies)
?VhgBoxplot
document()
check()
install()
library(Virusparies)
?VhgBoxplot
library(devtools)
path <- system.file("extdata", "virushunter.tsv", package = "Virusparies")
vh_file <- importVirusTable(path)
belowthreshold <- vh_file[vh_file$ViralRefSeq_E<1e-5,]
library(devtools)
document()
check()
install()
library(Virusparies)
?VhgBoxplot
citation("Virusparies")
?`Virusparies-package`
library(Virusparies)
?VhgBoxplot
path <- system.file("extdata", "virushunter.tsv", package = "Virusparies")
vh_file <- importVirusTable(path)
# import gatherer files
path2 <- system.file("extdata", "virusgatherer.tsv", package = "Virusparies")
vg_file <- importVirusTable(path2)
setdiff(names(vh_file),names(vg_file))
as.data.frame(names(vh_file))
vhgTabularRasa(as.data.frame(names(vh_file)),names_ = "Virushunter Hittable Columns")
as.data.frame(names(vh_file)ncol=2)
as.data.frame(names(vh_file),ncol=2)
as.data.frame(names(vh_file),ncol=2,nrow=8)
as.data.frame(matrix(names(vh_file), ncol=2, nrow=8, byrow=TRUE))
vhgTabularRasa(as.data.frame(matrix(names(vh_file), ncol=2, nrow=8, byrow=TRUE)),names_ = c("Virushunter Hittable Columns 1","Virushunter Hittable Columns 2"))
X <- vhgTabularRasa(as.data.frame(matrix(names(vh_file), ncol=2, nrow=8, byrow=TRUE)),names_ = c("Virushunter Hittable Columns 1","Virushunter Hittable Columns 2"))
exportVirusGt(X)
exportVirusGt(X)
exportVirusGt(X)
library(gt)
gtsave(X)
gtsave(X,filename = "plot.png")
X <- vhgTabularRasa(as.data.frame(matrix(names(vh_file), ncol=2, nrow=8, byrow=TRUE)),names_ = c("Virushunter Hittable Columns 1","Virushunter Hittable Columns 2"),title = "VirusHunter Columns")
gtsave(X,filename = "plot.png")
X <- vhgTabularRasa(as.data.frame(matrix(names(vh_file), ncol=2, nrow=8, byrow=TRUE)),names_ = c("Virushunter Hittable Columns 1","Virushunter Hittable Columns 2"))
as.data.frame(matrix(names(vg_file), ncol=2, nrow=8, byrow=TRUE))
matrix(names(vg_file)
matrix(names(vg_file))
X <- vhgTabularRasa(as.data.frame(names(vh_file)),names_ = c("Virushunter Hittable Columns "))
X
X <- vhgTabularRasa(as.data.frame(names(vh_file)),names_ = c("VirusHunter Hittable Columns "),title = "VirusHunter columns")
ggsave(X,"file.png")
gtsave(X,"file.png")
X <- vhgTabularRasa(as.data.frame(names(vg_file)),names_ = c("VirusGatherer Hittable Columns "),title = "VirusGatherer columns")
gtsave(X,"file.png")
vh_file <- importVirusTable(path = "/home/sergej/Desktop/coding/masterarbeit/data/hittables_20055_taubert_smalldna/virushunter.tsv")
X <- vhgTabularRasa(as.data.frame(names(vh_file)),names_ = c("VirusHunter Hittable Columns "),title = "VirusHunter columns")
gtsave(X,"plot.png")
names(vh_file)
X <- vhgTabularRasa(as.data.frame(names(vh_file)),names_ = c("VirusHunter Hittable Columns "),title = "VirusHunter columns")
# import gatherer files
path2 <- system.file("extdata", "virusgatherer.tsv", package = "Virusparies")
vg_file <- importVirusTable(path2)
names(vh_file)
path <- system.file("extdata", "virushunter.tsv", package = "Virusparies")
vh_file <- importVirusTable(path)
names(vh_file)
names_ <- names(vh_file)[-6]
names_
X <- vhgTabularRasa(as.data.frame( names_),names_ = c("VirusHunter Hittable Columns "),title = "VirusHunter columns")
gtsave(X)
gtsave(X,"plot.png")
vh_file <- importVirusTable(path = "/home/sergej/Desktop/coding/masterarbeit/data/hittables_20055_taubert_smalldna/virushunter.tsv")
names(vh_file)
library(devtools)
library(Virusparies)
library(devtools)
library(devtools)
library(Virusparies)
library(Virusparies)
library(devtools)
ls
library(devtools)
document()
check()
install()
library(Virusparies)
?VhgBoxplot
library(devtools)
libra
library(Virusparies)
?exportVirusGt
?vhgTabularRasa
path <- system.file("extdata", "virushunter.tsv", package = "Virusparies")
vh_file <- importVirusTable(path)
# plot 1: plot boxplot for "identity"
identity <- VhgBoxplot(vh_file,y_column = "ViralRefSeq_ident")
# generate table
vhgTabularRasa(identity$summary_stats)
# example 2: plot part of Vh_file (could be any other table)
# using first 10 rows of SRA_run,num_hits,bestquery,ViralRefSeq_E and Identity col.
vh_file_part <- vh_file[c(1:10),c(1,7,9,10,11)]
vhgTabularRasa(vh_file_part,title = "first 10 rows of vh_file",subtit =
"example for any table",names_ = c("Runs","Number of Contigs","Best Query Result",
"Refrence E-Value","Refrence Identity"))
exportVirusGt(vhgTabularRasa(vh_file_part))
library(gt)
?gtsave
library(devtools)
document()
check()
install()
library(Virusparies)
?VhgBoxplot
exportVirusGt(vhgTabularRasa(vh_file_part))
path <- system.file("extdata", "virushunter.tsv", package = "Virusparies")
vh_file <- importVirusTable(path)
?vhgTabularRasa
# example 2: plot part of Vh_file (could be any other table)
# using first 10 rows of SRA_run,num_hits,bestquery,ViralRefSeq_E and Identity col.
vh_file_part <- vh_file[c(1:10),c(1,7,9,10,11)]
exportVirusGt(vhgTabularRasa(vh_file_part))
library(devtools)
document()
check()
install()
install.packages("chromote")
install.packages("chromote")
chromote::find_chrome()
library(Virusparies)
path <- system.file("extdata", "virushunter.tsv", package = "Virusparies")
vh_file <- importVirusTable(path)
# plot 1: plot boxplot for "identity"
identity <- VhgBoxplot(vh_file,y_column = "ViralRefSeq_ident")
# generate table
vhgTabularRasa(identity$summary_stats)
# example 2: plot part of Vh_file (could be any other table)
# using first 10 rows of SRA_run,num_hits,bestquery,ViralRefSeq_E and Identity col.
vh_file_part <- vh_file[c(1:10),c(1,7,9,10,11)]
exportVirusGt(vhgTabularRasa(vh_file_part))
Sys.which("chrome")
library(gt)
?gtsave
filename="table.png"
grep(pattern="\.(.*)",filename)
install.packages("tools")
install.packages("tools")
install.packages("tools")
install.packages("tools")
install.packages("tools")
install.packages("tools")
library(tools, lib.loc = "/usr/lib/R/library")
file_ext(filename)
fileext <- file_ext(filename)
fileext <- file_ext(filename)
if(fileext=="png"|"pdf"){
print("test")
}
if(fileext=="png"|fileext=="pdf"){
print("test")
}
filename="table.pdf"
fileext <- file_ext(filename)
if(fileext=="png"|fileext=="pdf"){
print("test")
}
find_chrome()
library(chromote)
find_chrome()
library(gt)
?gtsave
?gtsave
library(devtools)
use_package("chromote",type = "Imports")
document()
check()
document()
check()
install()
library(Virusparies)
?exportVirusGt
?png
library(devtools)
document()
check()
document()
check()
document()
check()
document()
document()
check()
document()
check()
document()
check()
install()
library(Virusparies)
?exportVirusGt
path <- system.file("extdata", "virushunter.tsv", package = "Virusparies")
vh_file <- importVirusTable(path)
# using first 10 rows of SRA_run,num_hits,bestquery,ViralRefSeq_E and Identity col.
vh_file_part <- vh_file[c(1:10),c(1,7,9,10,11)]
table <- vhgTabularRasa(vh_file_part,title = "first 10 rows of vh_file",subtit =
"example for any table",names_ = c("Runs","Number of Contigs","Best Query Result",
"Refrence E-Value","Refrence Identity"))
## Not run:
exportVirusGt(gtable=table,filename="vh_parttable.docx")
## End(Not run)
?exportVirusPlot
path <- system.file("extdata", "virushunter.tsv", package = "Virusparies")
vh_file <- importVirusTable(path)
# Basic plot
plot <- VhgIdentityScatterPlot(vh_file,cutoff = 1e-5)
## Not run:
exportVirusPlot(plot_object=plot,file_name="testplot.png",width=1920,height=1080)
library(devtools)
document()
check()
install()
library(Virusparies)
path <- system.file("extdata", "virushunter.tsv", package = "Virusparies")
vh_file <- importVirusTable(path)
# Basic plot
plot <- VhgIdentityScatterPlot(vh_file,cutoff = 1e-5)
## Not run:
exportVirusPlot(plot_object=plot,file_name="testplot.png",width=8,height=6,units="in")
## End(Not run)
rm(list=ls())
exportVirusPlot(plot_object=plot,file_name="testplot",width=8,height=6,units="in",device = "png")
filename="test"
sub('.*\\.', '', tolower(file_name))
file_name="test"
sub('.*\\.', '', tolower(file_name))
library(devtools)
document()
check()
document()
check()
install()
library(Virusparies)
path <- system.file("extdata", "virushunter.tsv", package = "Virusparies")
vh_file <- importVirusTable(path)
# Basic plot
plot <- VhgIdentityScatterPlot(vh_file,cutoff = 1e-5)
## Not run:
exportVirusPlot(plot_object=plot,file_name="testplot.png",width=8,height=6,units="in")
path <- system.file("extdata", "virushunter.tsv", package = "Virusparies")
vh_file <- importVirusTable(path)
# Basic plot
plot <- VhgIdentityScatterPlot(vh_file,cutoff = 1e-5)
## Not run:
exportVirusPlot(plot=plot,file_name="testplot.png",width=8,height=6,units="in")
## End(Not run)
exportVirusPlot(plot=plot,file_name="testplot",width=8,height=6,units="in",device = "png")
library(devtools)
document()
check()
document()
check()
install()
library(Virusparies)
?exportVirusPlot
library(devtools)
document()
check()
document()
document()
check()
install()
library(Virusparies)
?exportVirusPlot
path <- system.file("extdata", "virushunter.tsv", package = "Virusparies")
vh_file <- importVirusTable(path)
# Basic plot
plot <- VhgIdentityScatterPlot(vh_file,cutoff = 1e-5)
## Not run:
# first export
exportVirusPlot(plot=plot,file_name="testplot.png",width=8,height=6,units="in")
library(devtools)
document()
document()
document()
document()
check()
install()
library(Virusparies)
?`Virusparies-package`
library(devtools)
document()
check()
install()
library(devtools)
document()
check()
install()
library(Virusparies)
?exportVirusGt
path <- system.file("extdata", "virushunter.tsv", package = "Virusparies")
vh_file <- importVirusTable(path)
# using first 10 rows of SRA_run,num_hits,bestquery,ViralRefSeq_E and Identity col.
vh_file_part <- vh_file[c(1:10),c(1,7,9,10,11)]
table <- vhgTabularRasa(vh_file_part,title = "first 10 rows of vh_file",subtit =
"example for any table",names_ = c("Runs","Number of Contigs","Best Query Result",
"Refrence E-Value","Refrence Identity"))
## Not run:
exportVirusGt(gtable=table,filename="vh_parttable.png")
find_chrome_path <- function() {
os_type <- .Platform$OS.type
if (os_type == "windows") {
chrome_path <- system("where chrome", intern = TRUE)
if (length(chrome_path) == 0) {
chrome_path <- system("where chromium", intern = TRUE)
}
} else if (os_type == "unix") {
if (Sys.info()["sysname"] == "Darwin") {
chrome_path <- system("mdfind 'kMDItemKind == Application' | grep 'Google Chrome.app'", intern = TRUE)
if (length(chrome_path) == 0) {
chrome_path <- system("mdfind 'kMDItemKind == Application' | grep 'Chromium.app'", intern = TRUE)
}
} else {
chrome_path <- system("which google-chrome", intern = TRUE)
if (chrome_path == "") {
chrome_path <- system("which chromium-browser", intern = TRUE)
}
}
} else {
stop("Unsupported OS type")
}
return(chrome_path)
}
chrome_path <- find_chrome_path()
print(chrome_path)
library(devtools)
document()
check()
library(devtools)
document()
check()
document()
check()
check()
check()
check()
document()
check()
check()
document()
install()
